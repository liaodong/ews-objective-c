#import <Foundation/Foundation.h>
#import "Generator.h"
#import "handlers/MPSEWSDocumentHandler.h"

int main (int argc, const char* argv[]) {
        NSString* xml = @"<?xml version=\"1.0\" encoding=\"utf-8\"?><m:SyncFolderHierarchyResponse xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"><m:ResponseMessages><m:SyncFolderHierarchyResponseMessage ResponseClass=\"Success\"><m:ResponseCode>NoError</m:ResponseCode><m:SyncState>H4sIAAAAAAAEAGNgYGUAAotqE0tHE2NTA0ddZ3NHC10TR2djXSdnJ2ddNyMnC2cnczdLU1OD2vBgveDKvOTgksSSVOfEvMSiSgYr0nW65eekpBZ5pjBYkq43LLWoODM/j8HAOSczNa8ELBbvbG7gYmhmYKJrYOlqrmtiYZmm62Ro4aTr4mRsbO5k6WjsZuDGYOZcWhScWlSWWuSbmJeZllpcQpw+cPhwMTCIAZ0BcblHZmpRYlFyRiXIVQyCQGkDINYDqdvkzNJgMmGCW0f53zBZhtzVjAw1Au+zZgmt8V5pFXQzTpw9BqSKkQOIGfiAGAiAbAYJEINkU3gZGJhI18XHwMBMoi6OUI96snQ1kK4L6EIZsnRJk6VLChQTJOviIl0XMDSayNLVSJYL+cnSxUO6Lk79jc/I0vWcLF0vyPKXAAMDG+m6JMmyC1gesJKui5ssuzjJCsNXpJcbQF0vySpthBgYWEjXJQvyF3mFIrhoFQOyMGV50hxktbc8aaOqoRwf/xmXlje7kVUQ4zQ0NEawRSq+mtqGSurpL8mjqqFAMFMqbfZVahs60alzNidVIwoIOift2h9G7STlH/v5cAiZVQiuiMpxn1eW+pbahjqsN/j1jdreV/F5c12Vyoaq//lh3utNZvWF3VBO/fOPa/ceMSSzdsNp6MtMp/DpVHbp9cM6vIy7qF1KWSpx6W+kdo5qvLRb+hG1XWrO90D7JrVdasqZyS9HbUON6wR3T6aqoZz6j9em/bb2orahK77OP8dP7Ygy7V3Pf4PaYbrwllD5IgZOBiQAALVvynKlDgAA</m:SyncState><m:IncludesLastFolderInRange>true</m:IncludesLastFolderInRange><m:Changes><t:Create><t:CalendarFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAENAAA=\" ChangeKey=\"AgAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAMZkAd\"/></t:CalendarFolder></t:Create><t:Create><t:ContactsFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEOAAA=\" ChangeKey=\"AwAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAI8f4z\"/></t:ContactsFolder></t:Create><t:Create><t:ContactsFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAIVUh/AAA=\" ChangeKey=\"AwAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAIVVwR\"/></t:ContactsFolder></t:Create><t:Create><t:ContactsFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAIVUiAAAA=\" ChangeKey=\"AwAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAIVVwZ\"/></t:ContactsFolder></t:Create><t:Create><t:ContactsFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEcAAA=\" ChangeKey=\"AwAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAACZ\"/></t:ContactsFolder></t:Create><t:Create><t:ContactsFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEbAAA=\" ChangeKey=\"AwAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAACR\"/></t:ContactsFolder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEaAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAACJ\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEKAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAMZkBP\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAIVUiCAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAIVWxH\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAIVUiBAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAIVWxA\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEPAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAMZkAk\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEMAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAMZif8\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAJL7HmAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAJL8/j\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAJL7HnAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAJL8/p\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAJL7HoAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAJL9fD\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEQAAA=\" ChangeKey=\"BgAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAI8f45\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEZAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAACB\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAERAAA=\" ChangeKey=\"BQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAI8f43\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAELAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAAA1\"/></t:Folder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEJAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAAAz\"/></t:Folder></t:Create><t:Create><t:CalendarFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAJL7HqAAA=\" ChangeKey=\"AgAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAJL+Ot\"/></t:CalendarFolder></t:Create><t:Create><t:CalendarFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAJL7HpAAA=\" ChangeKey=\"AgAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAJL+Oo\"/></t:CalendarFolder></t:Create><t:Create><t:TasksFolder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAESAAA=\" ChangeKey=\"BAAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAI8f41\"/></t:TasksFolder></t:Create><t:Create><t:Folder><t:FolderId Id=\"AAMkAGVlM2I3NGVmLTY0YjEtNDRjYi04NTA4LWRkOWExNTAyMmFkNAAuAAAAAACyQwSANJCQRoh3/VYdAG2rAQB8EO9qmhKsS6k6UtleFwdcAAAAAAEdAAA=\" ChangeKey=\"AQAAABYAAAB8EO9qmhKsS6k6UtleFwdcAAAAAACh\"/></t:Folder></t:Create></m:Changes></m:SyncFolderHierarchyResponseMessage></m:ResponseMessages></m:SyncFolderHierarchyResponse>";
        
        //@"<BasePermission xmlns=\"ews_xsd/messages\" xmlns:t=\"ews_xsd/types\"><t:UserId><t:SID>sid</t:SID><Ignore><Foo></Foo><Foo></Foo></Ignore><t:PrimarySmtpAddress>fiberlink.com</t:PrimarySmtpAddress><t:DisplayName>Venkat Murty</t:DisplayName><t:DistinguishedUser>Default</t:DistinguishedUser></t:UserId><t:CanCreateItems>TRUE</t:CanCreateItems><t:EditItems>All</t:EditItems><t:DeleteItems>None</t:DeleteItems></BasePermission>";

        id obj = [MPSEWSDocumentHandler toObj:xml];

        NSLog(@"obj = %@", obj);

        NSMutableString* b = [[NSMutableString alloc] init];
        [MPSEWSDocumentHandler toXml:obj buffer:b];

        NSLog(@"xml = %@", xml);
        NSLog(@"xml = %@", b);

        xml = @"<t:SharingSecurity  xmlns=\"http://schemas.microsoft.com/exchange/services/2006/messages\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\"><UserSid>sid</UserSid><A></A></t:SharingSecurity>";

        obj = [MPSEWSDocumentHandler toObj:xml];
        NSLog(@"obj = %@", obj);
        obj = [[NSString alloc] initWithData:obj encoding:NSUTF8StringEncoding];
        NSLog(@"obj = %@", obj);
}

